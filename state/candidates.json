{
  "active_edge": "Cycle 23: Typeclass hierarchy refactor (LocalGapBound + BaseDim)",
  "cycle_23_plan": {
    "goal": "Refactor typeclass hierarchy to separate provable LocalGapBound from projective SinglePointBound",
    "tasks": [
      {
        "name": "LocalGapBound",
        "type": "DEFINE",
        "description": "New typeclass with just gap_le_one field (provable from evaluation map)",
        "status": "TODO"
      },
      {
        "name": "SinglePointBound extends LocalGapBound",
        "type": "REFACTOR",
        "description": "Make SinglePointBound extend LocalGapBound, keep ell_zero_eq_one",
        "status": "TODO"
      },
      {
        "name": "BaseDim",
        "type": "DEFINE",
        "description": "Separate typeclass for explicit base dimension (base : ℕ, ell_zero_eq)",
        "status": "TODO"
      },
      {
        "name": "riemann_inequality_affine",
        "type": "PROVE",
        "description": "ℓ(D) ≤ deg(D) + BaseDim.base using LocalGapBound + BaseDim",
        "status": "TODO"
      },
      {
        "name": "ellV2_real_add_single_le_succ",
        "type": "REFACTOR",
        "description": "Change hypothesis from [SinglePointBound R K] to [LocalGapBound R K]",
        "status": "TODO"
      }
    ],
    "victory_condition": "Clean typeclass hierarchy + riemann_inequality_affine proved"
  },
  "cycle_22_results": {
    "candidates_ok": [
      "residueFieldAtPrime",
      "residueFieldAtPrime.field",
      "residueMapAtPrime"
    ],
    "candidates_blocked": [
      "uniformizerAt",
      "evaluationMap",
      "SinglePointBound instance"
    ],
    "candidates_impossible": [
      "ell_zero_eq_one (FUNDAMENTAL: L(0) = R not k in affine model)"
    ],
    "key_discovery": "HeightOneSpectrum captures only FINITE places; model is AFFINE not PROJECTIVE"
  },
  "architecture": {
    "hierarchy": [
      "LocalGapBound R K          -- PROVABLE (gap ≤ 1 via evaluation map)",
      "    ↑ extends",
      "SinglePointBound R K       -- PROJECTIVE (adds ell_zero = 1)",
      "",
      "BaseDim R K                -- SEPARATE (explicit base dimension)"
    ],
    "rationale": "Separates what we CAN prove (LocalGapBound) from projective requirements (SinglePointBound)"
  },
  "future_work": {
    "cycle_24": "Prove instance : LocalGapBound R K via evaluation map",
    "later": "Compactification for SinglePointBound instance"
  },
  "blockers": [
    "SinglePointBound.ell_zero_eq_one requires compactification (infinite places)",
    "uniformizerAt needs mathlib DVR API exploration"
  ],
  "resolved_blockers": [
    "CYCLE 22: Identified affine model limitation - now addressed via hierarchy refactor"
  ]
}
